<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PSP Detector - Demo</title>
    <style>
      /* System Theme Aware CSS Variables */
      :root {
        --primary: #1976d2;
        --primary-dark: #1565c0;
        --secondary: #03dac6;
        --surface: #ffffff;
        --surface-variant: #f8f9fa;
        --on-surface: #1c1b1f;
        --on-surface-variant: #5f6368;
        --outline: #dadce0;
        --shadow: rgba(0, 0, 0, 0.1);
        --error: #d93025;
        --warning: #ea8600;
        --success: #137333;
        --radius: 4px;
        --elevation: 0 1px 3px rgba(0, 0, 0, 0.12);
        --transition: all 0.15s ease;
      }

      /* Dark theme support */
      @media (prefers-color-scheme: dark) {
        :root {
          --primary: #4285f4;
          --primary-dark: #3367d6;
          --secondary: #34a853;
          --surface: #202124;
          --surface-variant: #2d2e30;
          --on-surface: #e8eaed;
          --on-surface-variant: #9aa0a6;
          --outline: #5f6368;
          --shadow: rgba(0, 0, 0, 0.3);
          --error: #f28b82;
          --warning: #fdd663;
          --success: #81c995;
        }
      }

      * {
        box-sizing: border-box;
      }

      body {
        width: 360px;
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background: var(--surface);
        color: var(--on-surface);
        line-height: 1.4;
        font-size: 13px;
        overflow: hidden;
      }

      .popup-container {
        background: var(--surface);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        width: 100%;
        transition: var(--transition);
      }

      .popup-header {
        display: flex;
        align-items: center;
        padding: 16px;
        gap: 12px;
        background: var(--surface);
        color: var(--on-surface);
        border-bottom: 1px solid var(--outline);
        position: relative;
      }

      #psp-image {
        width: 40px;
        height: 40px;
        border-radius: var(--radius);
        background: var(--surface-variant);
        padding: 6px;
        object-fit: contain;
        transition: var(--transition);
        box-shadow: var(--elevation);
      }

      .header-content {
        flex: 1;
        min-width: 0;
      }

      #psp-name {
        margin: 0;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: -0.01em;
        line-height: 1.2;
        color: var(--on-surface);
        word-wrap: break-word;
      }

      .popup-body {
        padding: 16px;
      }

      #psp-detected-domain {
        margin: 0 0 16px;
        padding: 12px;
        background: var(--surface-variant);
        border-radius: var(--radius);
        border-left: 3px solid var(--primary);
      }

      #psp-detected-domain h3 {
        margin: 0 0 8px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--primary);
      }

      #psp-detection-details {
        font-size: 13px;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        color: var(--on-surface);
        background: var(--surface);
        padding: 8px;
        border-radius: var(--radius);
        word-break: break-all;
        border: 1px solid var(--outline);
      }

      #psp-description {
        margin: 0 0 12px;
        color: var(--on-surface-variant);
        line-height: 1.4;
        font-size: 13px;
      }

      #psp-notice {
        margin: 12px 0;
        padding: 10px 12px;
        border-radius: var(--radius);
        font-size: 12px;
        line-height: 1.3;
        border-left: 3px solid var(--warning);
        background: var(--surface-variant);
        color: var(--on-surface-variant);
        display: none;
        box-shadow: var(--elevation);
      }

      #psp-notice.show {
        display: block;
        animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      #psp-url {
        margin: 16px 0 0;
      }

      #psp-url a {
        display: inline-flex;
        align-items: center;
        padding: 8px 12px;
        background: var(--primary);
        color: white;
        border-radius: var(--radius);
        text-decoration: none;
        font-weight: 500;
        font-size: 13px;
        transition: var(--transition);
        box-shadow: var(--elevation);
        gap: 6px;
      }

      #psp-url a:hover {
        background: var(--primary-dark);
        box-shadow: var(--shadow);
        transform: translateY(-1px);
      }

      #psp-url a:focus {
        outline: 2px solid var(--secondary);
        outline-offset: 2px;
      }

      #psp-url a::after {
        content: 'â†—';
        font-size: 12px;
        opacity: 0.8;
      }

      /* Demo controls */
      .demo-controls {
        position: fixed;
        bottom: 20px;
        left: 20px;
        right: 20px;
        background: var(--surface);
        border: 1px solid var(--outline);
        border-radius: var(--radius);
        padding: 12px;
        box-shadow: var(--elevation);
        z-index: 1000;
      }

      .demo-controls h4 {
        margin: 0 0 8px;
        font-size: 12px;
        color: var(--on-surface-variant);
      }

      .demo-controls button {
        margin: 4px;
        padding: 6px 10px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: var(--radius);
        font-size: 11px;
        cursor: pointer;
        transition: var(--transition);
      }

      .demo-controls button:hover {
        background: var(--primary-dark);
      }
    </style>
  </head>

  <body>
    <div class="popup-container">
      <div class="popup-header">
        <img
          id="psp-image"
          alt="PSP logo"
          src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjNjc3MkU3IiByeD0iOCIvPgo8cGF0aCBkPSJNMTMuNSAxMkgyNi41QzI3LjMyODQgMTIgMjggMTIuNjcxNiAyOCAxMy41VjE0QzI4IDE0LjgyODQgMjcuMzI4NCAxNSAyNi41IDE1SDEzLjVDMTIuNjcxNiAxNSAxMiAxNC44Mjg0IDEyIDE0VjEzLjVDMTIgMTIuNjcxNiAxMi42NzE2IDEyIDEzLjUgMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuNSAxOEgyNi41QzI3LjMyODQgMTggMjggMTguNjcxNiAyOCAxOS41VjIwQzI4IDIwLjgyODQgMjcuMzI4NCAyMSAyNi41IDIxSDEzLjVDMTIuNjcxNiAyMSAxMiAyMC44Mjg0IDEyIDIwVjE5LjVDMTIgMTguNjcxNiAxMi42NzE2IDE4IDEzLjUgMThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuNSAyNEgyNi41QzI3LjMyODQgMjQgMjggMjQuNjcxNiAyOCAyNS41VjI2QzI4IDI2LjgyODQgMjcuMzI4NCAyNyAyNi41IDI3SDEzLjVDMTIuNjcxNiAyNyAxMiAyNi44Mjg0IDEyIDI2VjI1LjVDMTIgMjQuNjcxNiAxMi42NzE2IDI0IDEzLjUgMjRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"
          style="display: block;"
        />
        <div class="status-icon" id="status-icon" style="display: none;">
          ðŸ“Š
        </div>
        <div class="header-content">
          <h1 id="psp-name">Adyen</h1>
        </div>
      </div>

      <div class="popup-body">
        <div class="loading-state" id="loading-state" style="display: none;">
          <div class="loading-spinner"></div>
          <p>Analyzing payment providers...</p>
        </div>

        <div id="content-state" style="display: block;">
          <div id="psp-detected-domain" style="display: block;">
            <h3>Detected via Match String</h3>
            <div id="psp-detection-details">adyen.com</div>
          </div>
          <div id="psp-description">
            Adyen is a payment company offering businesses an end-to-end infrastructure for managing online, mobile, and in-store payments. Adyen provides solutions for risk management, analytics, and acquiring services, catering to enterprises with significant transaction volumes.
          </div>
          <div id="psp-notice"></div>
          <div id="psp-url">
            <a href="https://www.adyen.com" target="_blank">Learn More</a>
          </div>
        </div>
      </div>
    </div>

    <div class="demo-controls">
      <h4>Demo Controls:</h4>
      <button onclick="showMatchStringDemo()">Match String Example</button>
      <button onclick="showRegexDemo()">Regex Example</button>
      <button onclick="showNoDetection()">No Detection Info</button>
      <button onclick="showLoadingState()">Loading State</button>
    </div>

    <script>
      function showMatchStringDemo() {
        document.getElementById('loading-state').style.display = 'none';
        document.getElementById('content-state').style.display = 'block';
        document.getElementById('psp-detected-domain').style.display = 'block';
        document.getElementById('psp-name').textContent = 'Stripe';
        document.getElementById('psp-description').textContent = 'Stripe is a technology company that builds economic infrastructure for the internet. Businesses of every size use Stripe\'s software to accept payments and manage their businesses online.';

        const header = document.querySelector('#psp-detected-domain h3');
        header.textContent = 'Detected via Match String';

        const details = document.getElementById('psp-detection-details');
        details.textContent = 'stripe.com';

        const link = document.querySelector('#psp-url a');
        link.href = 'https://stripe.com';
        link.textContent = 'Learn More';
      }

      function showRegexDemo() {
        document.getElementById('loading-state').style.display = 'none';
        document.getElementById('content-state').style.display = 'block';
        document.getElementById('psp-detected-domain').style.display = 'block';
        document.getElementById('psp-name').textContent = 'PayPal';
        document.getElementById('psp-description').textContent = 'PayPal is an American multinational financial technology company operating an online payments system in the majority of countries that support online money transfers.';

        const header = document.querySelector('#psp-detected-domain h3');
        header.textContent = 'Detected via Regex Pattern';

        const details = document.getElementById('psp-detection-details');
        details.textContent = '/paypal[.-]?(js|checkout|payments)/i';

        const link = document.querySelector('#psp-url a');
        link.href = 'https://paypal.com';
        link.textContent = 'Learn More';
      }

      function showNoDetection() {
        document.getElementById('loading-state').style.display = 'none';
        document.getElementById('content-state').style.display = 'block';
        document.getElementById('psp-detected-domain').style.display = 'none';
        document.getElementById('psp-name').textContent = 'Adyen';
        document.getElementById('psp-description').textContent = 'Adyen is a payment company offering businesses an end-to-end infrastructure for managing online, mobile, and in-store payments.';

        const link = document.querySelector('#psp-url a');
        link.href = 'https://adyen.com';
        link.textContent = 'Learn More';
      }

      function showLoadingState() {
        document.getElementById('loading-state').style.display = 'block';
        document.getElementById('content-state').style.display = 'none';
        document.getElementById('psp-name').textContent = 'Detecting PSP...';
      }

      // Start with the Adyen example
      window.addEventListener('load', function() {
        showMatchStringDemo();
        setTimeout(function() {
          document.getElementById('psp-name').textContent = 'Adyen';
          document.getElementById('psp-description').textContent = 'Adyen is a payment company offering businesses an end-to-end infrastructure for managing online, mobile, and in-store payments. Adyen provides solutions for risk management, analytics, and acquiring services, catering to enterprises with significant transaction volumes.';

          const header = document.querySelector('#psp-detected-domain h3');
          header.textContent = 'Detected via Match String';

          const details = document.getElementById('psp-detection-details');
          details.textContent = 'adyen.com';

          const link = document.querySelector('#psp-url a');
          link.href = 'https://adyen.com';
          link.textContent = 'Learn More';
        }, 100);
      });
    </script>
  </body>
</html>
